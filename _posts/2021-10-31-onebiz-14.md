---
title: "自宅创业 - #14 写订单系统后台"
---

这两周主要在写订单系统后台，快要写完了，比我预想的时间更长（包括部分上期完成的任务）。

<img src="/static/2021-10-31/order-admin-tasks.png" alt="order-admin-tasks" width="50%" style="display:block;margin:0 auto;">


## 订单系统

订单系统最核心的是商品和订单。商品分为基础商品（SPU）和商品规格（SKU），一对多的关系。订单分为顾客单和发货单，也是一对多的关系。除此之外，还有品类、供应商和供货商品，关系多就麻烦。

在后端逻辑和数据存储上，要处理关联查询和交易快照，代码有点复杂，花了不少时间。在前端界面上，表单字段很多，不同表单之间还有关联字段，花了较多时间处理。

之后我想明白了，对目前的业务来说，品类、商品、供应商都不多，前端一次性全查出来就好了，需要用的地方直接下拉选择。很多父子孙组件之间，属性和事件传递绕来绕去，不如干脆放到Vuex全局管理，更省心。

此外，我还仔细研究了[拼多多商家后台](https://mms.pinduoduo.com/)，还有拼多多商家版App，确实做的不错。

**为什么不直接用开源的商城系统？**

比如 [macrozheng/mall](https://github.com/macrozheng/mall), [saleor](https://github.com/saleor/saleor) 和 [django-oscar](https://github.com/django-oscar/django-oscar)，直接用不好吗？或者二次开发？

说实话，我当时也调研了几个 Python 的开源商城框架，但没有很仔细。开源的和我想要的差别有点大，而且定制也有点复杂，再加上程序员本能吧，就直接自己做了一个。

最近和一些朋友聊的时候也被问到这个问题，所以我又更仔细的调研了一下。

开源电商有这么几个问题：

1. 前台系统主要是Web网站，支持小程序，APP的基本没有。
2. 后台管理系统功能不全，用起来也不方便，比如都没有批量发货，运费模板。
3. 基本没有适配中国境内的支付渠道，以及快递物流。

需要定制的内容很多，但应该还是比完全自建更容易。如果只是想卖货，不如用现成的电商服务，比如微信小店、Shopify、有赞商城。如果想做交易平台，再考虑是开源+定制还是自建，如果重来一次，我会先试试开源+定制。


## 后续计划

继续把订单系统做完，小程序迭代做完。也大致有了下一个产品的想法，但不着急去做。


## 最后

你可以在 [关于我](/about) 页面找到我的联系方式，欢迎交流！
